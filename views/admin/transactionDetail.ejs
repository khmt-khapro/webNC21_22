<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <title>Trang quản lí</title>
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div class="admin-page-layout">
    <%- include('./menu'); %>
      <div id="main-content">
        <div id="header">
          <div class="header-left float-left">
            <i id="toggle-left-menu" class="fa fa-bars"></i>
          </div>
          <div class="header-right float-right">
            <i class="ion-ios-people"></i>
          </div>
        </div>

        <div id="page-container">
          <!-- breadcrumb -->
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="/admin/transaction">Xét duyệt giao dịch</a></li>
              <li class="breadcrumb-item active" aria-current="page">Chi tiết giao dịch</li>
            </ol>
          </nav>

          <!-- user-detail -->
          <div class="container rounded bg-white mt-5 mb-5 admin-user-detail">
            <div class="row">
              <div class="col-md-1 border-right"></div>
              <div class="col-md-10 border-right">
                <div style="border: 1px solid #EAECF0; border-radius: 8px; max-width: 1200px; min-height: 200px;"
                  class="p-5">
                  <div class="d-flex justify-content-between">
                    <div>
                      <div class="font-weight-bold" style="font-size: 28px;">
                        <span class="mr-2"><i class="fa fa-money" aria-hidden="true"
                            style="color: cadetblue;"></i></span>
                        <% switch (transactionDetail.transaction_type) { 
                          case 'withdraw' : %>
                          Rút tiền
                          <% break; 
                          case 'recharge' : %>
                            Nạp tiền
                            <% break; 
                          case 'transfer' : %>
                            Chuyển tiền
                          <% break; 
                          } %>
                              <span>qua ví</span>
                      </div>
                      <div class="mt-2">
                        <span class="mr-2"><i class="fa fa-calendar" aria-hidden="true"></i></span>
                        Ngày giao dịch: <span>
                          <%= transactionDetail.transaction_time %>
                        </span>
                      </div>
                      <div class="mt-2">
                        <span class="mr-2"><i class="fa fa-calendar" aria-hidden="true"></i></span>
                        Người giao dịch: <span>
                          <%= transactionDetail.mover_name %>
                        </span>
                      </div>
                      <%if (transactionDetail.transaction_type === 'transfer') { %>
                        
                        <div class="mt-2">
                          <span class="mr-2"><i class="fa fa-calendar" aria-hidden="true"></i></span>
                          Người nhận: <span>
                            <%= transactionDetail.receiver_name %>
                          </span>
                        </div>

                        <div class="mt-2">
                          <span class="mr-2"><i class="fa fa-calendar" aria-hidden="true"></i></span>
                          Phí chuyển tiền: <span>
                            <% switch (transactionDetail.transfer_fee_bearer) { 
                              case 'receiver' : %>
                              Người nhận trả
                              <% break; 
                              case 'mover' : %>
                                Người chuyển trả
                                <% break; 
                              } %>
                          </span>
                        </div>
                      <% } %>
                      <div class="mt-2 font-weight-bolder">
                        <span class="mr-2"><i class="fa fa-bar-chart" aria-hidden="true"></i></span>
                        Biến động giao dịch:
                        <span style="font-size: 26px;">
                          <%= transactionDetail.money_transaction %> VNĐ
                        </span>
                      </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-start">
                      <% switch (transactionDetail.transaction_status) { case 1 : %>
                        <div class="py-2 text-center transactionDetailStatus" style="background-color: #007BFF; color: white; width: 150px;">Đã
                          hoàn
                          thành
                        </div>
                        <% break; 
                        case 0 : %>
                          <div class="py-2 text-center transactionDetailStatus" style="background-color: greenyellow; width: 150px;">
                            Đang chờ xác nhận
                          </div>
                          <% break; 
                          case 2 : %>
                          <div class="py-2 text-center transactionDetailStatus" style="background-color: red; color: white; width: 150px;">
                            Đã huỷ
                          </div>
                          <% break; 
                        } %>

                          <% if(transactionDetail?.transaction_status == 0){ %>
                            <span class="ml-3" id='updateTransactionStatusIcon'>
                              <i class="fa fa-pencil" aria-hidden="true" style="cursor: pointer"
                                id='openUpdateTransactionStatusModal'></i>
                            </span>
                            <span class="ml-3" id='deleteTransactionIcon' style="cursor: pointer;">
                              <i class="fa fa-trash-o" aria-hidden="true" style="color: red;"></i>
                            </span>
                          <% } else{ %>  
                            <h1></h1>
                         <% } %>
                        
                    </div>
                  </div>
                  <div class="mt-2">
                    <span class="mr-2"><i class="fa fa-comments-o" aria-hidden="true"></i></span>
                    Nội dung giao dịch:
                    <div style="border: 1px solid #EAECF0; border-radius: 8px; min-height: 200px;" class="p-2 mt-2">
                      <%= transactionDetail.transaction_content %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="changeTransactionConfirmModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Xác nhận thao tác</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              Bạn chắc chắn chuyển trạng thái XÁC NHẬN cho giao dịch này không?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
              <button type="button" class="btn btn-primary" id='confirmChangeTransaction'>Xác nhận</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="deleteTransactionConfirmModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Xác nhận thao tác</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              Bạn chắc chắn muốn HUỶ giao dịch này không?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
              <button type="button" class="btn btn-primary" id='confirmDeleteTransaction'>Xác nhận</button>
            </div>
          </div>
        </div>
      </div>
  </div>
  <span id="show-lable">Hello</span>
  </div>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
    crossorigin="anonymous"></script>
  <script src="/js/page.js" type="text/javascript"></script>

</body>

</html>